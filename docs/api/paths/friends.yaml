/friends:
  get:
    tags: [Friends]
    operationId: Friends_list
    summary: List current user's friends and pending relationships
    security:
      - jwtAuth: []
    responses:
      '200':
        description: List of friendships for the authenticated user
        content:
          application/json:
            schema:
              $ref: '../components/schemas/friend.yaml#/FriendListResponse'
      '401':
        description: Not authenticated
      '500':
        description: Failed to fetch friends

/friends/requests:
  post:
    tags: [Friends]
    operationId: Friends_sendRequest
    summary: Send a friend request
    security:
      - jwtAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/friend.yaml#/SendFriendRequest'
    responses:
      '201':
        description: Friend request created
        content:
          application/json:
            schema:
              $ref: '../components/schemas/friend.yaml#/Friendship'
      '400':
        description: Invalid request (self-request or missing user)
      '401':
        description: Not authenticated
      '409':
        description: Request already exists or users already friends

/friends/requests/{friendshipId}:
  patch:
    tags: [Friends]
    operationId: Friends_respondRequest
    summary: Accept or reject a friend request
    security:
      - jwtAuth: []
    parameters:
      - name: friendshipId
        in: path
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/friend.yaml#/RespondFriendRequest'
    responses:
      '200':
        description: Updated friendship
        content:
          application/json:
            schema:
              $ref: '../components/schemas/friend.yaml#/Friendship'
      '400':
        description: Invalid status
      '401':
        description: Not authenticated
      '403':
        description: Only the addressee can respond
      '404':
        description: Friend request not found

/friends/{userId}/block:
  post:
    tags: [Friends]
    operationId: Friends_blockUser
    summary: Block a user and prevent further interactions
    security:
      - jwtAuth: []
    parameters:
      - name: userId
        in: path
        required: true
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Friendship updated with blocked status
        content:
          application/json:
            schema:
              $ref: '../components/schemas/friend.yaml#/Friendship'
      '400':
        description: Cannot block yourself
      '401':
        description: Not authenticated
      '404':
        description: Target user not found
